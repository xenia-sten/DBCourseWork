{"ast":null,"code":"import userService from \"@/services/user.service\";\nimport MyButton from \"../UI/MyButton.vue\";\nimport MyDialog from \"../UI/MyDialog.vue\";\nimport JobCreateForm from \"../JobCreateForm.vue\";\nimport jobsServices from \"@/services/jobs.services\";\nimport categoryServices from \"@/services/category.services\";\nimport CategoryForm from \"../CategoryForm.vue\";\nimport ServiceForm from '../ServiceForm.vue';\nimport templateService from \"@/services/template.service\";\nexport default {\n  components: {\n    MyButton,\n    MyDialog,\n    JobCreateForm,\n    CategoryForm,\n    ServiceForm\n  },\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: \"Services\",\n  data() {\n    return {\n      visibleCreateJob: false,\n      visibleCreateCategory: false,\n      visibleCreateService: false,\n      jobs: [],\n      currentJob: null,\n      currentIdJob: -1,\n      categories: [],\n      currentCategory: null,\n      currentIdCategory: -1,\n      services: [],\n      parseDuration: ''\n    };\n  },\n  methods: {\n    getJobsByUser() {\n      userService.getJobsByUser(this.currentUser.id).then(response => {\n        this.jobs = response.data;\n      }).catch(e => console.log(e));\n    },\n    getCategoriesByJob() {\n      jobsServices.getCategoriesByJob(this.currentJob.id).then(response => {\n        this.categories = response.data;\n      }).catch(e => console.log(e));\n    },\n    getServicesByCategory() {\n      categoryServices.getTemplByCategory(this.currentCategory.id).then(response => {\n        this.services = response.data;\n      }).catch(e => console.log(e));\n    },\n    createJob(job) {\n      var data = {\n        user_id: this.currentUser.id,\n        name: job.name\n      };\n      jobsServices.addJob(data).then(response => {\n        console.log(response);\n      }).catch(e => console.log(e));\n      this.visibleCreateJob = false;\n    },\n    createCategory(category) {\n      var data = {\n        name: category.name,\n        job_id: this.currentJob.id\n      };\n      categoryServices.addCategory(data).then(response => {\n        console.log(response);\n      }).catch(e => console.log(e));\n      this.visibleCreateCategory = false;\n    },\n    createService(service) {\n      var data = {\n        category_id: this.currentCategory.id,\n        name: service.name,\n        price: service.price,\n        duration: service.duration,\n        description: service.description\n      };\n      templateService.addTempalte(data).then(response => {\n        console.log(response);\n      }).catch(e => console.log(e));\n      this.getServicesByCategory();\n    },\n    removeJob(job) {\n      jobsServices.deleteJob(job.id).then(response => {\n        console.log(response);\n      }).catch(e => console.log(e));\n      this.getJobsByUser();\n    },\n    removeCategory(category) {\n      categoryServices.deleteCategory(category.id).then(response => {\n        console.log(response);\n      }).catch(e => console.log(e));\n    },\n    setActiveJob(job, currentIdJob) {\n      this.currentJob = job;\n      this.currentId = job ? currentIdJob : -1;\n      this.getCategoriesByJob();\n    },\n    setActiveCategory(category, currentIdCategory) {\n      this.currentCategory = category;\n      this.currentIdCategory = category ? currentIdCategory : -1;\n      this.getServicesByCategory();\n    },\n    showDialogCreateJob() {\n      this.visibleCreateJob = true;\n    },\n    showDialogCreateCateg() {\n      this.visibleCreateCategory = true;\n    },\n    showDialogCreateService() {\n      this.visibleCreateService = true;\n    },\n    parseServiceDuration(service) {\n      var arrDuration = service.duration.split(':');\n      return;\n    }\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    }\n  },\n  mounted() {\n    this.getJobsByUser();\n  }\n};","map":{"version":3,"names":["userService","MyButton","MyDialog","JobCreateForm","jobsServices","categoryServices","CategoryForm","ServiceForm","templateService","components","name","data","visibleCreateJob","visibleCreateCategory","visibleCreateService","jobs","currentJob","currentIdJob","categories","currentCategory","currentIdCategory","services","parseDuration","methods","getJobsByUser","currentUser","id","then","response","catch","e","console","log","getCategoriesByJob","getServicesByCategory","getTemplByCategory","createJob","job","user_id","addJob","createCategory","category","job_id","addCategory","createService","service","category_id","price","duration","description","addTempalte","removeJob","deleteJob","removeCategory","deleteCategory","setActiveJob","currentId","setActiveCategory","showDialogCreateJob","showDialogCreateCateg","showDialogCreateService","parseServiceDuration","arrDuration","split","computed","$store","state","auth","user","mounted"],"sources":["C:\\Users\\Admin\\Desktop\\X\\SSTU\\6 семак\\БД\\DBCourseWork\\CW-front\\src\\components\\pages\\ServicesPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"list row\">\r\n    <div class=\"col-md-4\">\r\n      <br />\r\n      <h4>Специализация:</h4>\r\n      <my-button id=\"btn-add-job\" @click=\"showDialogCreateJob\">\r\n        Создать\r\n      </my-button>\r\n      <!-- eslint-disable -->\r\n      <my-dialog v-model:show=\"visibleCreateJob\">\r\n        <job-create-form @create=\"createJob\" />\r\n      </my-dialog>\r\n      <ul class=\"list-group\" v-if=\"this.jobs.length > 0\">\r\n        <li\r\n          class=\"jobItem list-group-item\"\r\n          :class=\"{ active: id == currentIdJob }\"\r\n          v-for=\"(job, id) in jobs\"\r\n          :key=\"job.id\"\r\n          @click=\"setActiveJob(job, currentIdJob)\"\r\n        >\r\n          {{ job.name }}\r\n          <button class=\"badge badge-danger mr-2\" @click=\"removeJob(job)\">\r\n            Delete\r\n          </button>\r\n        </li>\r\n      </ul>\r\n      <h5 v-else style=\"color: red\">Список специализаций пуст</h5>\r\n    </div>\r\n    <div class=\"categList col-md-4\">\r\n      <div v-if=\"currentJob\">\r\n        <h5>Список категорий:</h5>\r\n        <my-button id=\"btn-add-job\" @click=\"showDialogCreateCateg\">\r\n          Создать\r\n        </my-button>\r\n        <!-- eslint-disable -->\r\n        <my-dialog v-model:show=\"visibleCreateCategory\">\r\n          <category-form @create=\"createCategory\" />\r\n        </my-dialog>\r\n        <ul class=\"list-group\" v-if=\"this.categories.length > 0\">\r\n          <li\r\n            class=\"jobItem list-group-item\"\r\n            :class=\"{ active: id == currentIdCategory }\"\r\n            v-for=\"(category, id) in categories\"\r\n            :key=\"category.id\"\r\n            @click=\"setActiveCategory(category, currentIdCategory)\"\r\n          >\r\n            {{ category.name }}\r\n            <button\r\n              class=\"badge badge-danger mr-2\"\r\n              @click=\"removeCategory(category)\"\r\n            >\r\n              Delete\r\n            </button>\r\n          </li>\r\n        </ul>\r\n        <h5 v-else style=\"color: red\">Список специализаций пуст</h5>\r\n      </div>\r\n    </div>\r\n    <div class=\"categList col-md-4\">\r\n      <div v-if=\"currentCategory\">\r\n        <h5>Список услуг:</h5>\r\n        <my-button id=\"btn-add-job\" @click=\"showDialogCreateService\">\r\n          Создать\r\n        </my-button>\r\n        <!-- eslint-disable -->\r\n        <my-dialog v-model:show=\"visibleCreateService\">\r\n          <service-form @create=\"createService\" />\r\n        </my-dialog>\r\n        <ul class=\"list-group\" v-if=\"this.services.length > 0\">\r\n          <li\r\n            class=\"jobItem serviceItem list-group-item\"\r\n            v-for=\"service in services\"\r\n            :key=\"service.id\"\r\n          >\r\n            <p><b>Название: </b>{{ service.name }}</p>\r\n            <p><b>Цена: </b>{{ service.price }}</p>\r\n            <p><b>Длительность: </b>{{ `${service.duration.hours ?? '0'}:${service.duration.minutes ?? '00'}` }}</p>\r\n            <p><b>Описание: </b>{{ service.description }}</p>\r\n            <router-link\r\n              :to=\"'/services/' + service.id\"\r\n              class=\"badge badge-warning\"\r\n              >Edit</router-link\r\n            >\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport userService from \"@/services/user.service\";\r\nimport MyButton from \"../UI/MyButton.vue\";\r\nimport MyDialog from \"../UI/MyDialog.vue\";\r\nimport JobCreateForm from \"../JobCreateForm.vue\";\r\nimport jobsServices from \"@/services/jobs.services\";\r\nimport categoryServices from \"@/services/category.services\";\r\nimport CategoryForm from \"../CategoryForm.vue\";\r\nimport ServiceForm from '../ServiceForm.vue';\r\nimport templateService from \"@/services/template.service\";\r\n\r\nexport default {\r\n  components: { MyButton, MyDialog, JobCreateForm, CategoryForm, ServiceForm },\r\n  // eslint-disable-next-line vue/multi-word-component-names\r\n  name: \"Services\",\r\n  data() {\r\n    return {\r\n      visibleCreateJob: false,\r\n      visibleCreateCategory: false,\r\n      visibleCreateService: false,\r\n      jobs: [],\r\n      currentJob: null,\r\n      currentIdJob: -1,\r\n      categories: [],\r\n      currentCategory: null,\r\n      currentIdCategory: -1,\r\n      services: [],\r\n      parseDuration: '',\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    getJobsByUser() {\r\n      userService\r\n        .getJobsByUser(this.currentUser.id)\r\n        .then((response) => {\r\n          this.jobs = response.data;\r\n        })\r\n        .catch((e) => console.log(e));\r\n    },\r\n    getCategoriesByJob() {\r\n      jobsServices\r\n        .getCategoriesByJob(this.currentJob.id)\r\n        .then((response) => {\r\n          this.categories = response.data;\r\n        })\r\n        .catch((e) => console.log(e));\r\n    },\r\n    getServicesByCategory() {\r\n      categoryServices\r\n        .getTemplByCategory(this.currentCategory.id)\r\n        .then((response) => {\r\n          this.services = response.data;\r\n        })\r\n        .catch((e) => console.log(e));\r\n    },\r\n\r\n    createJob(job) {\r\n      var data = {\r\n        user_id: this.currentUser.id,\r\n        name: job.name,\r\n      };\r\n      jobsServices\r\n        .addJob(data)\r\n        .then((response) => {\r\n          console.log(response);\r\n        })\r\n        .catch((e) => console.log(e));\r\n      this.visibleCreateJob = false;\r\n    },\r\n    createCategory(category) {\r\n      var data = {\r\n        name: category.name,\r\n        job_id: this.currentJob.id,\r\n      };\r\n      categoryServices\r\n        .addCategory(data)\r\n        .then((response) => {\r\n          console.log(response);\r\n        })\r\n        .catch((e) => console.log(e));\r\n      this.visibleCreateCategory = false;\r\n    },\r\n    createService(service){\r\n      var data = {\r\n        category_id: this.currentCategory.id,\r\n        name: service.name,\r\n        price: service.price,\r\n        duration: service.duration,\r\n        description: service.description\r\n      };\r\n      templateService.addTempalte(data).then(\r\n        (response) => {\r\n          console.log(response);\r\n        }\r\n      ).catch(e => console.log(e));\r\n      this.getServicesByCategory();\r\n    },\r\n\r\n    removeJob(job) {\r\n      jobsServices\r\n        .deleteJob(job.id)\r\n        .then((response) => {\r\n          console.log(response);\r\n        })\r\n        .catch((e) => console.log(e));\r\n      this.getJobsByUser();\r\n    },\r\n    removeCategory(category) {\r\n      categoryServices\r\n        .deleteCategory(category.id)\r\n        .then((response) => {\r\n          console.log(response);\r\n        })\r\n        .catch((e) => console.log(e));\r\n    },\r\n\r\n    setActiveJob(job, currentIdJob) {\r\n      this.currentJob = job;\r\n      this.currentId = job ? currentIdJob : -1;\r\n      this.getCategoriesByJob();\r\n    },\r\n    setActiveCategory(category, currentIdCategory) {\r\n      this.currentCategory = category;\r\n      this.currentIdCategory = category ? currentIdCategory : -1;\r\n      this.getServicesByCategory();\r\n    },\r\n\r\n    showDialogCreateJob() {\r\n      this.visibleCreateJob = true;\r\n    },\r\n    showDialogCreateCateg() {\r\n      this.visibleCreateCategory = true;\r\n    },\r\n    showDialogCreateService() {\r\n      this.visibleCreateService = true;\r\n    },\r\n\r\n    parseServiceDuration(service){\r\n      var arrDuration = service.duration.split(':');\r\n      return\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    currentUser() {\r\n      return this.$store.state.auth.user;\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    this.getJobsByUser();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.list {\r\n  text-align: left;\r\n  margin: auto;\r\n}\r\n.jobItem {\r\n  border: 2px solid #343A40;\r\n  border-radius: 5px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  position: static;\r\n}\r\n.serviceItem{\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n}\r\n.lists {\r\n  display: flex;\r\n}\r\n.categList {\r\n  margin-top: 27px;\r\n}\r\n#btn-add-job {\r\n  margin-bottom: 15px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}