{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport userService from \"@/services/user.service\";\nimport UserForm from \"../UserForm.vue\";\nimport MyDialog from '../UI/MyDialog.vue';\nexport default {\n  components: {\n    UserForm,\n    MyDialog\n  },\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: \"Profile\",\n  data() {\n    return {\n      curUser: {},\n      dialogVisible: false\n    };\n  },\n  methods: {\n    updateUser(user) {\n      const data = {\n        name: user.name,\n        email: user.email,\n        phone_number: user.phone_number\n      };\n      userService.updateUser(this.currentUser.id, data).then(response => {\n        console.log(response);\n      }).catch(e => console.log(e));\n      this.dialogVisible = false;\n      this.getCurUser();\n    },\n    showDialog() {\n      this.dialogVisible = true;\n    },\n    getCurUser() {\n      userService.getUserById(this.currentUser.id).then(response => {\n        this.curUser = response.data;\n      }).catch(e => console.log(e));\n    }\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    }\n  },\n  mounted() {\n    if (!this.currentUser) {\n      this.$router.push(\"/login\");\n    }\n    this.getCurUser();\n  }\n};","map":{"version":3,"names":["userService","UserForm","MyDialog","components","name","data","curUser","dialogVisible","methods","updateUser","user","email","phone_number","currentUser","id","then","response","console","log","catch","e","getCurUser","showDialog","getUserById","computed","$store","state","auth","mounted","$router","push"],"sources":["C:\\Users\\Admin\\Desktop\\X\\SSTU\\6 семак\\БД\\DBCourseWork\\CW-front\\src\\components\\pages\\ProfilePage.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <header class=\"jumbotron\">\r\n      <h3>\r\n        <strong>{{ curUser.name }}</strong> Profile\r\n      </h3>\r\n    </header>\r\n    <!-- <p>\r\n      <strong>Token:</strong>\r\n      {{currentUser.accessToken.substring(0, 20)}} ... {{currentUser.accessToken.substr(currentUser.accessToken.length - 20)}}\r\n    </p> -->\r\n    <p>\r\n      <strong>Email:</strong>\r\n      {{ curUser.email }}\r\n    </p>\r\n    <p>\r\n      <strong>Phone number:</strong>\r\n      {{ curUser.phone_number }}\r\n    </p>\r\n    <strong>Roles:</strong>\r\n    <ul>\r\n      <li v-for=\"role in currentUser.roles\" :key=\"role\">{{ role }}</li>\r\n    </ul>\r\n    <button class=\"badge badge-warning\" @click=\"showDialog\">Edit</button>\r\n    <my-dialog v-model:show=\"dialogVisible\">\r\n      <user-form @update=\"updateUser\" />\r\n    </my-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport userService from \"@/services/user.service\";\r\nimport UserForm from \"../UserForm.vue\";\r\nimport MyDialog from '../UI/MyDialog.vue';\r\n\r\nexport default {\r\n  components: { UserForm, MyDialog },\r\n  // eslint-disable-next-line vue/multi-word-component-names\r\n  name: \"Profile\",\r\n\r\n  data() {\r\n    return {\r\n      curUser: {},\r\n      dialogVisible: false,\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    updateUser(user) {\r\n      const data = {\r\n        name: user.name,\r\n        email: user.email,\r\n        phone_number: user.phone_number\r\n      };\r\n      userService.updateUser(this.currentUser.id, data).then(\r\n        (response) => {\r\n          console.log(response);\r\n        }\r\n      ).catch(e => console.log(e));\r\n      this.dialogVisible = false;\r\n      this.getCurUser();\r\n    },\r\n\r\n    showDialog() {\r\n      this.dialogVisible = true;\r\n    },\r\n\r\n    getCurUser(){\r\n      userService\r\n      .getUserById(this.currentUser.id)\r\n      .then((response) => {\r\n        this.curUser = response.data;\r\n      })\r\n      .catch((e) => console.log(e));\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    currentUser() {\r\n      return this.$store.state.auth.user;\r\n    },\r\n  },\r\n  mounted() {\r\n    if (!this.currentUser) {\r\n      this.$router.push(\"/login\");\r\n    }\r\n\r\n    this.getCurUser();\r\n  },\r\n};\r\n</script>\r\n"],"mappings":";AA+BA,OAAOA,WAAU,MAAO,yBAAyB;AACjD,OAAOC,QAAO,MAAO,iBAAiB;AACtC,OAAOC,QAAO,MAAO,oBAAoB;AAEzC,eAAe;EACbC,UAAU,EAAE;IAAEF,QAAQ;IAAEC;EAAS,CAAC;EAClC;EACAE,IAAI,EAAE,SAAS;EAEfC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,OAAO,EAAE,CAAC,CAAC;MACXC,aAAa,EAAE;IACjB,CAAC;EACH,CAAC;EAEDC,OAAO,EAAE;IACPC,UAAUA,CAACC,IAAI,EAAE;MACf,MAAML,IAAG,GAAI;QACXD,IAAI,EAAEM,IAAI,CAACN,IAAI;QACfO,KAAK,EAAED,IAAI,CAACC,KAAK;QACjBC,YAAY,EAAEF,IAAI,CAACE;MACrB,CAAC;MACDZ,WAAW,CAACS,UAAU,CAAC,IAAI,CAACI,WAAW,CAACC,EAAE,EAAET,IAAI,CAAC,CAACU,IAAI,CACnDC,QAAQ,IAAK;QACZC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;MACvB,CACF,CAAC,CAACG,KAAK,CAACC,CAAA,IAAKH,OAAO,CAACC,GAAG,CAACE,CAAC,CAAC,CAAC;MAC5B,IAAI,CAACb,aAAY,GAAI,KAAK;MAC1B,IAAI,CAACc,UAAU,CAAC,CAAC;IACnB,CAAC;IAEDC,UAAUA,CAAA,EAAG;MACX,IAAI,CAACf,aAAY,GAAI,IAAI;IAC3B,CAAC;IAEDc,UAAUA,CAAA,EAAE;MACVrB,WAAU,CACTuB,WAAW,CAAC,IAAI,CAACV,WAAW,CAACC,EAAE,EAC/BC,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAI,CAACV,OAAM,GAAIU,QAAQ,CAACX,IAAI;MAC9B,CAAC,EACAc,KAAK,CAAEC,CAAC,IAAKH,OAAO,CAACC,GAAG,CAACE,CAAC,CAAC,CAAC;IAC/B;EACF,CAAC;EAEDI,QAAQ,EAAE;IACRX,WAAWA,CAAA,EAAG;MACZ,OAAO,IAAI,CAACY,MAAM,CAACC,KAAK,CAACC,IAAI,CAACjB,IAAI;IACpC;EACF,CAAC;EACDkB,OAAOA,CAAA,EAAG;IACR,IAAI,CAAC,IAAI,CAACf,WAAW,EAAE;MACrB,IAAI,CAACgB,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC;IAC7B;IAEA,IAAI,CAACT,UAAU,CAAC,CAAC;EACnB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}